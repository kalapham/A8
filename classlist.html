<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Danh sách lớp A8</title>
  <link rel="icon" href="images/logo-a8.png" type="image/png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1 class="site-title">Lớp A8 – Niên khóa 2021–2025</h1>
      <p class="site-slogan">Danh sách thành viên</p>
      <button class="theme-toggle" onclick="toggleDarkMode()" aria-label="Toggle dark mode">
        <svg class="icon-moon" viewBox="0 0 24 24">
          <path d="M21 12.79A9 9 0 0111.21 3a7 7 0 000 14A9 9 0 0021 12.79z"/>
        </svg>
        <svg class="icon-sun" viewBox="0 0 24 24">
          <circle cx="12" cy="12" r="5"/>
          <line x1="12" y1="1" x2="12" y2="3"/>
          <line x1="12" y1="21" x2="12" y2="23"/>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
          <line x1="1" y1="12" x2="3" y2="12"/>
          <line x1="21" y1="12" x2="23" y2="12"/>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
        </svg>
      </button>
      <nav class="main-nav">
        <ul>
          <li><a href="index.html" class="nav-link">🏠 Trang chủ</a></li>
          <li><a href="gallery.html" class="nav-link">📷 Album ảnh</a></li>
          <li><a href="guestbook.html" class="nav-link">✍️ Lưu bút</a></li>
          <li><a href="classlist.html" class="nav-link active">👥 Danh sách lớp</a></li>
          <li><a href="events.html" class="nav-link">📅 Thông tin</a></li>
          <li><a href="documents.html" class="nav-link">📚 Tài liệu</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="main-content">
    <div class="container">
      <div class="controls">
        <label for="sort"><strong>🔤 Sắp xếp theo:</strong></label>
        <select id="sort" onchange="sortStudents()" class="form-select" style="display: inline-block; width: auto; margin-left: var(--space-sm);">
          <option value="name">Tên</option>
          <option value="dob">Ngày sinh</option>
        </select>
      </div>
      
      <section class="content-section">
        <h2 class="section-title">👨‍🎓 Thành viên lớp A8</h2>
        <div class="student-grid" id="studentList"></div>
      </section>
    </div>
  </main>

  <div id="imagePopup" class="popup-overlay" onclick="closePopup(event)">
    <div class="popup-content">
      <img id="popupImg" src="" alt="" class="popup-img">
      <div id="popupInfo"></div>
      <span class="popup-close" onclick="closePopup(event)">&times;</span>
    </div>
  </div>

  <footer class="site-footer">
    <div class="container">
      <p>&copy; 2025 Lớp A8 - Thiết kế bởi chúng ta</p>
    </div>
  </footer>

  <script>
    const rawStudents = [
      { name: "Đặng Khánh An", dob: "2010-08-27" }, { name: "Nguyễn Thái An", dob: "2010-08-14" },
      { name: "Cao Minh Anh", dob: "2010-02-07" }, { name: "Nguyễn Hoàng Minh Anh", dob: "2010-10-15" },
      { name: "Nguyễn Vũ Thùy Anh", dob: "2010-09-25" }, { name: "Nguyễn Vũ Trúc Anh", dob: "2010-09-02" },
      { name: "Lê Minh Ánh", dob: "2010-01-26" }, { name: "Cao Xuân Bách", dob: "2010-02-25" },
      { name: "Phan Vũ Dương Cầm", dob: "2010-08-11" }, { name: "Nguyễn Đăng Công", dob: "2010-10-20" },
      { name: "Hà Vũ Minh Đức", dob: "2010-07-06" }, { name: "Cao Thu Hà", dob: "2010-09-11" },
      { name: "Đặng Ngọc Hà", dob: "2010-08-27" }, { name: "Nguyễn Trung Hiếu", dob: "2010-07-17" },
      { name: "Phí Công Hiếu", dob: "2010-09-07" }, { name: "Lưu Tuyết Hoa", dob: "2010-10-17" },
      { name: "Nguyễn Chí Vương Hoàng", dob: "2010-08-19" }, { name: "Đỗ Vũ Quang Huy", dob: "2010-10-05" },
      { name: "Bùi Vân Khánh", dob: "2010-01-03" }, { name: "Nguyễn Ngọc Khánh", dob: "2010-09-05" },
      { name: "Nguyễn Phương Khánh", dob: "2010-11-23" }, { name: "Ma Khánh Lâm", dob: "2010-12-11" },
      { name: "Nguyễn Bảo Lâm", dob: "2010-07-24" }, { name: "Lưu Khánh Linh", dob: "2010-10-18" },
      { name: "Nguyễn Diệu Linh", dob: "2010-07-31" }, { name: "Nguyễn Hà Linh", dob: "2010-11-12" },
      { name: "Phùng Thanh Mai", dob: "2010-06-21" }, { name: "Trần Doãn Mạnh", dob: "2010-11-29" },
      { name: "Đặng Gia Minh", dob: "2010-08-22" }, { name: "Nguyễn Hoàng Hà My", dob: "2010-05-08" },
      { name: "Nguyễn Thu Ngân", dob: "2010-05-07" }, { name: "Đào Yến Nhi", dob: "2010-10-13" },
      { name: "Đặng Nam Phong", dob: "2010-11-08" }, { name: "Trần Đặng Duy Quang", dob: "2010-09-26" },
      { name: "Tô Hải Sơn", dob: "2010-09-15" }, { name: "Vũ Hải Sơn", dob: "2010-09-25" },
      { name: "Phạm Ngọc Thạch", dob: "2010-05-11" }, { name: "Ngô Minh Thư", dob: "2010-12-24" },
      { name: "Phạm Ngọc Quỳnh Thư", dob: "2010-04-24" }, { name: "Lê Nguyễn Đức Toàn", dob: "2010-01-22" },
      { name: "Lưu Viết Tùng", dob: "2010-09-19" }, { name: "Lê Thủy Vi", dob: "2010-04-14" },
      { name: "Nguyễn Tường Vy", dob: "2010-12-11" }
    ];

    const students = rawStudents.map((s, i) => ({
      ...s,
      thumb: `thumb/anh${i + 1}.webp`,
      full: `avatars/anh${i + 1}.jpg`
    }));

    function formatDate(dob) {
      const [y, m, d] = dob.split("-");
      return `${d}/${m}/${y}`;
    }

    function renderStudents(list) {
      const container = document.getElementById('studentList');
      container.innerHTML = '';
      list.forEach(student => {
        const card = document.createElement('div');
        card.className = 'student-card card';
        card.innerHTML = `
          <img src="${student.thumb}" loading="lazy" alt="${student.name}" onclick="openPopup('${student.full}', 'Tên: ${student.name}\\nNgày sinh: ${formatDate(student.dob)}')" class="student-avatar">
          <h4 class="student-name">${student.name}</h4>
        `;
        container.appendChild(card);
      });
    }

    function toggleDarkMode() {
      document.body.classList.toggle("dark");
      localStorage.setItem("darkMode", document.body.classList.contains("dark"));
    }

    function sortStudents() {
      const by = document.getElementById('sort').value;
      const sorted = [...students];
      if (by === 'name') {
        sorted.sort((a, b) => a.name.split(" ").pop().localeCompare(b.name.split(" ").pop()));
      } else if (by === 'dob') {
        sorted.sort((a, b) => new Date(a.dob) - new Date(b.dob));
      }
      renderStudents(sorted);
    }

    function openPopup(imageSrc, infoText) {
      document.getElementById('popupImg').src = imageSrc;
      document.getElementById('popupInfo').innerText = infoText;
      document.getElementById('imagePopup').classList.add('show');
    }

    function closePopup(event) {
      if (event.target.id === "imagePopup" || event.target.classList.contains("popup-close")) {
        document.getElementById('imagePopup').classList.remove('show');
      }
    }

    window.onload = () => {
      if (localStorage.getItem("darkMode") === "true") {
        document.body.classList.add("dark");
      }
      sortStudents();
    };
  </script>
</body>
</html>
